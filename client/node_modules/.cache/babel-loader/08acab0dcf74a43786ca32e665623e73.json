{"ast":null,"code":"import _slicedToArray from\"/Users/shubham/Desktop/blog/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useHistory,useLocation}from'react-router-dom';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import useStyles from'./styles';import memories from'../../images/memories.png';import{useDispatch}from'react-redux';import decode from'jwt-decode';var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});history.push('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(\"div\",{className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h2\",align:\"center\"},\"Blogs\"),/*#__PURE__*/React.createElement(\"img\",{className:classes.image,src:memories,alt:\"icon\",height:\"60\"})),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},user?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl},user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Log In\")));};export default Navbar;","map":{"version":3,"sources":["/Users/shubham/Desktop/blog/server/client/src/components/Navbar/Navbar.js"],"names":["React","useEffect","useState","Link","useHistory","useLocation","AppBar","Avatar","Button","Toolbar","Typography","useStyles","memories","useDispatch","decode","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","image","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"mappings":"gKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAAQC,IAAR,CAAeC,UAAf,CAA4BC,WAA5B,KAA8C,kBAA9C,CACA,OAAQC,MAAR,CAAiBC,MAAjB,CAAyBC,MAAzB,CAAiCC,OAAjC,CAA0CC,UAA1C,KAA2D,mBAA3D,CACA,MAAOC,CAAAA,SAAP,KAAsB,UAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,2BAArB,CACA,OAAQC,WAAR,KAA0B,aAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,YAAnB,CAKA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAMC,CAAAA,OAAO,CAAGL,SAAS,EAAzB,CADiB,cAGMT,QAAQ,CAACe,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAHd,wCAGVC,IAHU,eAGLC,OAHK,eAIjB,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CACA,GAAMW,CAAAA,OAAO,CAAGpB,UAAU,EAA1B,CACA,GAAMqB,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CAEA,GAAMqB,CAAAA,MAAM,CAAE,QAARA,CAAAA,MAAQ,EAAI,CACdH,QAAQ,CAAC,CAACI,IAAI,CAAG,QAAR,CAAD,CAAR,CACAH,OAAO,CAACI,IAAR,CAAa,GAAb,EAEAN,OAAO,CAAC,IAAD,CAAP,CACH,CALD,CAOArB,SAAS,CAAC,UAAI,CACV,GAAM4B,CAAAA,KAAK,CAAGR,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAGQ,KAArB,CAEA,GAAGA,KAAH,CAAS,CACN,GAAMC,CAAAA,YAAY,CAAGhB,MAAM,CAACe,KAAD,CAA3B,CAEA,GAAGC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAA7B,CAAmDP,MAAM,GAC3D,CAEDJ,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAP,CACH,CAVQ,CAUP,CAACK,QAAD,CAVO,CAAT,CAYA,mBACI,oBAAC,MAAD,EAAQ,SAAS,CAAET,OAAO,CAACkB,MAA3B,CAAmC,QAAQ,CAAC,QAA5C,CAAqD,KAAK,CAAC,SAA3D,eACE,2BAAK,SAAS,CAAIlB,OAAO,CAACmB,cAA1B,eACE,oBAAC,UAAD,EAAY,SAAS,CAAEhC,IAAvB,CAA6B,EAAE,CAAG,GAAlC,CAAsC,SAAS,CAAEa,OAAO,CAACoB,OAAzD,CAAkE,OAAO,CAAC,IAA1E,CAA+E,KAAK,CAAC,QAArF,UADF,cAEE,2BAAK,SAAS,CAAEpB,OAAO,CAACqB,KAAxB,CAA+B,GAAG,CAAEzB,QAApC,CAA8C,GAAG,CAAC,MAAlD,CAAyD,MAAM,CAAC,IAAhE,EAFF,CADF,cAMI,oBAAC,OAAD,EAAS,SAAS,CAAII,OAAO,CAACsB,OAA9B,EACIjB,IAAI,cACD,2BAAK,SAAS,CAAIL,OAAO,CAACuB,OAA1B,eACC,oBAAC,MAAD,EAAQ,SAAS,CAAIvB,OAAO,CAACwB,MAA7B,CAAqC,GAAG,CAAInB,IAAI,CAACoB,MAAL,CAAYC,IAAxD,CAA8D,GAAG,CAAErB,IAAI,CAACoB,MAAL,CAAYE,QAA/E,EAA0FtB,IAAI,CAACoB,MAAL,CAAYC,IAAZ,CAAiBE,MAAjB,CAAwB,CAAxB,CAA1F,CADD,cAEC,oBAAC,UAAD,EAAY,SAAS,CAAI5B,OAAO,CAAC6B,QAAjC,CAA2C,OAAO,CAAG,IAArD,EAA2DxB,IAAI,CAACoB,MAAL,CAAYC,IAAvE,CAFD,cAGC,oBAAC,MAAD,EAAQ,OAAO,CAAG,WAAlB,CAA8B,SAAS,CAAI1B,OAAO,CAACU,MAAnD,CAA2D,KAAK,CAAC,WAAjE,CAA6E,OAAO,CAAIA,MAAxF,WAHD,CADC,cAOA,oBAAC,MAAD,EAAQ,SAAS,CAAIvB,IAArB,CAA2B,EAAE,CAAG,OAAhC,CAAwC,OAAO,CAAE,WAAjD,CAA6D,KAAK,CAAC,SAAnE,WARR,CANJ,CADJ,CAsBH,CAjDD,CAmDA,cAAeY,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {Link , useHistory , useLocation} from 'react-router-dom'\nimport {AppBar , Avatar, Button, Toolbar, Typography} from '@material-ui/core'\nimport useStyles from './styles'\nimport memories from '../../images/memories.png';\nimport {useDispatch} from 'react-redux';\nimport decode from 'jwt-decode';\n\n\n\n\nconst Navbar = () => {\n    const classes = useStyles();\n\n    const [user,setUser] = useState(JSON.parse(localStorage.getItem('profile')))\n    const dispatch = useDispatch()\n    const history = useHistory()\n    const location = useLocation()\n\n    const logout =()=>{\n        dispatch({type : 'LOGOUT'})\n        history.push('/')\n\n        setUser(null)\n    }\n\n    useEffect(()=>{\n        const token = user ?.token;\n\n        if(token){\n           const decodedToken = decode(token);\n\n           if(decodedToken.exp * 1000 < new Date().getTime()) logout()\n        }\n\n        setUser(JSON.parse(localStorage.getItem('profile')))\n    },[location])\n\n    return (\n        <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n          <div className = {classes.brandContainer}>\n            <Typography component={Link} to = \"/\" className={classes.heading} variant=\"h2\" align=\"center\">Blogs</Typography>\n            <img className={classes.image} src={memories} alt=\"icon\" height=\"60\" />\n\n            </div>\n            <Toolbar className = {classes.toolbar}>\n               {user ? (\n                   <div className = {classes.profile}>\n                    <Avatar className = {classes.purple} alt = {user.result.name} src={user.result.imageUrl}>{user.result.name.charAt(0)}</Avatar>\n                    <Typography className = {classes.userName} variant = 'h6'>{user.result.name}</Typography>\n                    <Button variant = \"contained\" className = {classes.logout} color=\"secondary\" onClick = {logout}>Logout</Button>\n                   </div>\n               ) :(\n                    <Button component = {Link} to = \"/auth\" variant =\"contained\" color='primary'>Log In</Button>\n               )}\n\n            </Toolbar>\n        </AppBar>\n        \n    )\n}\n\nexport default Navbar\n"]},"metadata":{},"sourceType":"module"}